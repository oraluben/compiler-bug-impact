#!/bin/sh
set -e -x
echo deb http://127.0.0.1:9999/debian experimental main >> /etc/apt/sources.list
cat <<-EOF > /etc/apt/preferences.d/pin-gcc-exp
Package: cpp cpp-7 cpp-aarch64-linux-gnu cpp-arm-linux-gnueabi cpp-arm-linux-gnueabihf cpp-mips64el-linux-gnuabi64 cpp-mipsel-linux-gnu cpp-mips-linux-gnu cpp-powerpc64le-linux-gnu cpp-powerpc-linux-gnu cpp-s390x-linux-gnu fixincludes g++ g++-7 g++-7-multilib g++-aarch64-linux-gnu g++-arm-linux-gnueabi g++-arm-linux-gnueabihf gcc gcc-7 gcc-7-base gcc-7-hppa64-linux-gnu gcc-7-locales gcc-7-multilib gcc-7-plugin-dev gcc-7-source gcc-7-test-results gcc-aarch64-linux-gnu gcc-arm-linux-gnueabi gcc-arm-linux-gnueabihf gccgo gccgo-7 gccgo-7-multilib gccgo-aarch64-linux-gnu gccgo-arm-linux-gnueabi gccgo-arm-linux-gnueabihf gccgo-mips64el-linux-gnuabi64 gccgo-mipsel-linux-gnu gccgo-mips-linux-gnu gccgo-multilib gccgo-multilib-mips64el-linux-gnuabi64 gccgo-multilib-mipsel-linux-gnu gccgo-multilib-mips-linux-gnu gccgo-multilib-powerpc-linux-gnu gccgo-multilib-s390x-linux-gnu gccgo-powerpc64le-linux-gnu gccgo-powerpc-linux-gnu gccgo-s390x-linux-gnu gcc-hppa64-linux-gnu gcc-mips64el-linux-gnuabi64 gcc-mipsel-linux-gnu gcc-mips-linux-gnu gcc-multilib gcc-multilib-mips64el-linux-gnuabi64 gcc-multilib-mipsel-linux-gnu gcc-multilib-mips-linux-gnu gcc-multilib-powerpc-linux-gnu gcc-multilib-s390x-linux-gnu gcc-powerpc64le-linux-gnu gcc-powerpc-linux-gnu gcc-s390x-linux-gnu gcj-aarch64-linux-gnu gcj-arm-linux-gnueabi gcj-arm-linux-gnueabihf gcj-jdk gcj-jre gcj-jre-headless gcj-mips64el-linux-gnuabi64 gcj-mipsel-linux-gnu gcj-mips-linux-gnu gcj-powerpc64le-linux-gnu gcj-powerpc-linux-gnu gcj-s390x-linux-gnu gdc gdc-7 gdc-7-multilib gdc-aarch64-linux-gnu gdc-arm-linux-gnueabi gdc-arm-linux-gnueabihf gdc-mips64el-linux-gnuabi64 gdc-mipsel-linux-gnu gdc-mips-linux-gnu gdc-multilib gdc-multilib-mips64el-linux-gnuabi64 gdc-multilib-mipsel-linux-gnu gdc-multilib-mips-linux-gnu gdc-multilib-powerpc-linux-gnu gdc-multilib-s390x-linux-gnu gdc-powerpc64le-linux-gnu gdc-powerpc-linux-gnu gdc-s390x-linux-gnu gfortran gfortran-7 gfortran-7-multilib gfortran-aarch64-linux-gnu gfortran-arm-linux-gnueabi gfortran-arm-linux-gnueabihf gfortran-mips64el-linux-gnuabi64 gfortran-mipsel-linux-gnu gfortran-mips-linux-gnu gfortran-multilib gfortran-multilib-mips64el-linux-gnuabi64 gfortran-multilib-mipsel-linux-gnu gfortran-multilib-mips-linux-gnu gfortran-multilib-powerpc-linux-gnu gfortran-multilib-s390x-linux-gnu gfortran-powerpc64le-linux-gnu gfortran-powerpc-linux-gnu gfortran-s390x-linux-gnu g++-mips64el-linux-gnuabi64 g++-mipsel-linux-gnu g++-mips-linux-gnu g++-multilib g++-multilib-mips64el-linux-gnuabi64 g++-multilib-mipsel-linux-gnu g++-multilib-mips-linux-gnu g++-multilib-powerpc-linux-gnu g++-multilib-s390x-linux-gnu gnat-7 gnat-7-sjlj gobjc gobjc++ gobjc-7 gobjc++-7 gobjc-7-multilib gobjc++-7-multilib gobjc-aarch64-linux-gnu gobjc++-aarch64-linux-gnu gobjc-arm-linux-gnueabi gobjc++-arm-linux-gnueabi gobjc-arm-linux-gnueabihf gobjc++-arm-linux-gnueabihf gobjc-mips64el-linux-gnuabi64 gobjc++-mips64el-linux-gnuabi64 gobjc-mipsel-linux-gnu gobjc++-mipsel-linux-gnu gobjc-mips-linux-gnu gobjc++-mips-linux-gnu gobjc-multilib gobjc++-multilib gobjc-multilib-mips64el-linux-gnuabi64 gobjc++-multilib-mips64el-linux-gnuabi64 gobjc-multilib-mipsel-linux-gnu gobjc++-multilib-mipsel-linux-gnu gobjc-multilib-mips-linux-gnu gobjc++-multilib-mips-linux-gnu gobjc-multilib-powerpc-linux-gnu gobjc++-multilib-powerpc-linux-gnu gobjc-multilib-s390x-linux-gnu gobjc++-multilib-s390x-linux-gnu gobjc-powerpc64le-linux-gnu gobjc++-powerpc64le-linux-gnu gobjc-powerpc-linux-gnu gobjc++-powerpc-linux-gnu gobjc-s390x-linux-gnu gobjc++-s390x-linux-gnu g++-powerpc64le-linux-gnu g++-powerpc-linux-gnu g++-s390x-linux-gnu lib32asan4 lib32asan4-dbg lib32atomic1 lib32atomic1-dbg lib32cilkrts5 lib32cilkrts5-dbg lib32gcc1 lib32gcc1-dbg lib32gcc-7-dev lib32gfortran4 lib32gfortran4-dbg lib32gfortran-7-dev lib32go10 lib32go10-dbg lib32gomp1 lib32gomp1-dbg lib32gphobos68 lib32gphobos68-dbg lib32gphobos-7-dev lib32itm1 lib32itm1-dbg lib32lsan0 lib32lsan0-dbg lib32mpx2 lib32mpx2-dbg lib32objc4 lib32objc4-dbg lib32objc-7-dev lib32quadmath0 lib32quadmath0-dbg lib32stdc++6 lib32stdc++6-7-dbg lib32stdc++-7-dev lib32ubsan0 lib32ubsan0-dbg lib64asan4 lib64asan4-dbg lib64atomic1 lib64atomic1-dbg lib64cilkrts5 lib64cilkrts5-dbg lib64gcc1 lib64gcc1-dbg lib64gcc-7-dev lib64gfortran4 lib64gfortran4-dbg lib64gfortran-7-dev lib64go10 lib64go10-dbg lib64gomp1 lib64gomp1-dbg lib64gphobos68 lib64gphobos68-dbg lib64gphobos-7-dev lib64itm1 lib64itm1-dbg lib64mpx2 lib64mpx2-dbg lib64objc4 lib64objc4-dbg lib64objc-7-dev lib64quadmath0 lib64quadmath0-dbg lib64stdc++6 lib64stdc++6-7-dbg lib64stdc++-7-dev lib64ubsan0 lib64ubsan0-dbg libasan4 libasan4-dbg libatomic1 libatomic1-dbg libcc1-0 libcilkrts5 libcilkrts5-dbg libgcc1 libgcc1-dbg libgcc2 libgcc2-dbg libgcc4 libgcc4-dbg libgcc-7-dev libgccjit0 libgccjit0-dbg libgccjit-7-dev libgccjit-7-doc libgcj-bc libgcj-common libgfortran4 libgfortran4-dbg libgfortran-7-dev libgnat-7 libgnat-7-dbg libgo10 libgo10-dbg libgomp1 libgomp1-dbg libgphobos68 libgphobos68-dbg libgphobos-7-dev libgphobos-dev libitm1 libitm1-dbg liblsan0 liblsan0-dbg libmpx2 libmpx2-dbg libn32atomic1 libn32atomic1-dbg libn32gcc1 libn32gcc1-dbg libn32gcc-7-dev libn32gfortran4 libn32gfortran4-dbg libn32gfortran-7-dev libn32go10 libn32go10-dbg libn32gomp1 libn32gomp1-dbg libn32objc4 libn32objc4-dbg libn32objc-7-dev libn32stdc++6 libn32stdc++6-7-dbg libn32stdc++-7-dev libobjc4 libobjc4-dbg libobjc-7-dev libphobos-dev libquadmath0 libquadmath0-dbg libstdc++6 libstdc++6-7-dbg libstdc++-7-dev libstdc++-7-doc libstdc++-7-pic libtsan0 libtsan0-dbg libubsan0 libubsan0-dbg libx32asan4 libx32asan4-dbg libx32atomic1 libx32atomic1-dbg libx32cilkrts5 libx32cilkrts5-dbg libx32gcc1 libx32gcc1-dbg libx32gcc-7-dev libx32gfortran4 libx32gfortran4-dbg libx32gfortran-7-dev libx32go10 libx32go10-dbg libx32gomp1 libx32gomp1-dbg libx32gphobos68 libx32gphobos68-dbg libx32gphobos-7-dev libx32itm1 libx32itm1-dbg libx32lsan0 libx32lsan0-dbg libx32objc4 libx32objc4-dbg libx32objc-7-dev libx32quadmath0 libx32quadmath0-dbg libx32stdc++6 libx32stdc++6-7-dbg libx32stdc++-7-dev libx32ubsan0 libx32ubsan0-dbg 
Pin: release o=Debian,a=experimental
Pin-Priority: 999
EOF
apt-get update
apt-get -y dist-upgrade
apt-get -y autoremove
apt-get remove --purge -y gcc-6-base
