#!/bin/bash
set -e -x
id
apt-get update
apt-get -y install apt-transport-https

echo deb http://127.0.0.1:9999/debian experimental main >> /etc/apt/sources.list
cat <<-EOF > /etc/apt/preferences.d/pin-gcc-exp
Package: cpp cpp-aarch64-linux-gnu cpp-arm-linux-gnueabi cpp-arm-linux-gnueabihf cpp-mips-linux-gnu cpp-mips64el-linux-gnuabi64 cpp-mipsel-linux-gnu cpp-powerpc64le-linux-gnu cpp-s390x-linux-gnu g++ g++-aarch64-linux-gnu g++-arm-linux-gnueabi g++-arm-linux-gnueabihf g++-mips-linux-gnu g++-mips64el-linux-gnuabi64 g++-mipsel-linux-gnu g++-multilib g++-multilib-mips-linux-gnu g++-multilib-mips64el-linux-gnuabi64 g++-multilib-mipsel-linux-gnu g++-multilib-s390x-linux-gnu g++-powerpc64le-linux-gnu g++-s390x-linux-gnu gcc gcc-aarch64-linux-gnu gcc-arm-linux-gnueabi gcc-arm-linux-gnueabihf gcc-hppa64-linux-gnu gcc-mips-linux-gnu gcc-mips64el-linux-gnuabi64 gcc-mipsel-linux-gnu gcc-multilib gcc-multilib-mips-linux-gnu gcc-multilib-mips64el-linux-gnuabi64 gcc-multilib-mipsel-linux-gnu gcc-multilib-s390x-linux-gnu gcc-powerpc64le-linux-gnu gcc-s390x-linux-gnu gccgo gccgo-aarch64-linux-gnu gccgo-arm-linux-gnueabi gccgo-arm-linux-gnueabihf gccgo-mips-linux-gnu gccgo-mips64el-linux-gnuabi64 gccgo-mipsel-linux-gnu gccgo-multilib gccgo-multilib-mips-linux-gnu gccgo-multilib-mips64el-linux-gnuabi64 gccgo-multilib-mipsel-linux-gnu gccgo-multilib-s390x-linux-gnu gccgo-powerpc64le-linux-gnu gccgo-s390x-linux-gnu gcj-aarch64-linux-gnu gcj-arm-linux-gnueabi gcj-arm-linux-gnueabihf gcj-jdk gcj-jre gcj-jre-headless gcj-mips-linux-gnu gcj-mips64el-linux-gnuabi64 gcj-mipsel-linux-gnu gcj-powerpc64le-linux-gnu gcj-s390x-linux-gnu gdc gdc-aarch64-linux-gnu gdc-arm-linux-gnueabi gdc-arm-linux-gnueabihf gdc-mips-linux-gnu gdc-mips64el-linux-gnuabi64 gdc-mipsel-linux-gnu gdc-multilib gdc-multilib-mips-linux-gnu gdc-multilib-mips64el-linux-gnuabi64 gdc-multilib-mipsel-linux-gnu gdc-multilib-s390x-linux-gnu gdc-powerpc64le-linux-gnu gdc-s390x-linux-gnu gfortran gfortran-aarch64-linux-gnu gfortran-arm-linux-gnueabi gfortran-arm-linux-gnueabihf gfortran-mips-linux-gnu gfortran-mips64el-linux-gnuabi64 gfortran-mipsel-linux-gnu gfortran-multilib gfortran-multilib-mips-linux-gnu gfortran-multilib-mips64el-linux-gnuabi64 gfortran-multilib-mipsel-linux-gnu gfortran-multilib-s390x-linux-gnu gfortran-powerpc64le-linux-gnu gfortran-s390x-linux-gnu gobjc gobjc++ gobjc++-aarch64-linux-gnu gobjc++-arm-linux-gnueabi gobjc++-arm-linux-gnueabihf gobjc++-mips-linux-gnu gobjc++-mips64el-linux-gnuabi64 gobjc++-mipsel-linux-gnu gobjc++-multilib gobjc++-multilib-mips-linux-gnu gobjc++-multilib-mips64el-linux-gnuabi64 gobjc++-multilib-mipsel-linux-gnu gobjc++-multilib-s390x-linux-gnu gobjc++-powerpc64le-linux-gnu gobjc++-s390x-linux-gnu gobjc-aarch64-linux-gnu gobjc-arm-linux-gnueabi gobjc-arm-linux-gnueabihf gobjc-mips-linux-gnu gobjc-mips64el-linux-gnuabi64 gobjc-mipsel-linux-gnu gobjc-multilib gobjc-multilib-mips-linux-gnu gobjc-multilib-mips64el-linux-gnuabi64 gobjc-multilib-mipsel-linux-gnu gobjc-multilib-s390x-linux-gnu gobjc-powerpc64le-linux-gnu gobjc-s390x-linux-gnu libgcj-bc libgcj-common libgphobos-dev
Pin: release o=Debian,a=experimental
Pin-Priority: 999
EOF
echo deb https://people.debian.org/~doko/gcc-7 ./ >> /etc/apt/sources.list
echo 'APT::Get::AllowUnauthenticated "1";' > /etc/apt/apt.conf.d/99allow-unauth
apt-get update
apt-get -y dist-upgrade
apt-get -y autoremove
apt-get remove --purge -y gcc-6-base
#apt-get -y install cpp g++ gcc
